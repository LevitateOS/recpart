{
  "schema_version": 1,
  "mode": "ab",
  "layout_request": {},
  "resolved_layout": {
    "mode": "ab",
    "efi_size_mb": 1024,
    "root_size_mb": null,
    "root_a_size_mb": 20480,
    "root_b_size_mb": 20480,
    "state_size_mb": null
  },
  "disk": {
    "path": "/dev/vda",
    "size_bytes": 268435456000,
    "logical_sector_bytes": 512,
    "physical_sector_bytes": 4096
  },
  "dry_run": true,
  "steps": [
    {"phase": "partition", "command": "wipefs -a --force /dev/vda", "program": "wipefs", "args": ["-a", "--force", "/dev/vda"], "status": null, "stdout": null, "stderr": null, "dry_run": true},
    {"phase": "partition", "command": "sfdisk /dev/vda", "program": "sfdisk", "args": ["/dev/vda"], "status": null, "stdout": null, "stderr": null, "dry_run": true},
    {"phase": "partition", "command": "udevadm settle --timeout=10", "program": "udevadm", "args": ["settle", "--timeout=10"], "status": null, "stdout": null, "stderr": null, "dry_run": true}
  ],
  "partition_map": [
    {"index": 1, "name": "efi", "filesystem": "vfat", "label": "EFI", "gpt_type": "U", "size_mb": 1024, "mountpoint": "/boot"},
    {"index": 2, "name": "root_a", "filesystem": "ext4", "label": "ROOT_A", "gpt_type": "L", "size_mb": 20480, "mountpoint": "/slots/A"},
    {"index": 3, "name": "root_b", "filesystem": "ext4", "label": "ROOT_B", "gpt_type": "L", "size_mb": 20480, "mountpoint": "/slots/B"},
    {"index": 4, "name": "state", "filesystem": "ext4", "label": "STATE", "gpt_type": "L", "size_mb": null, "mountpoint": "/state"}
  ],
  "formatted_devices": ["/dev/vda1", "/dev/vda2", "/dev/vda3", "/dev/vda4"],
  "mounted": [
    {"path": "/mnt/sysroot", "device": "/dev/vda2"},
    {"path": "/mnt/sysroot/boot", "device": "/dev/vda1"},
    {"path": "/mnt/sysroot/state", "device": "/dev/vda4"}
  ],
  "handoff": {
    "schema_version": 1,
    "mode": "ab",
    "install_target": "/mnt/sysroot",
    "mount_map": [
      {"path": "/mnt/sysroot", "device": "/dev/vda2"},
      {"path": "/mnt/sysroot/boot", "device": "/dev/vda1"},
      {"path": "/mnt/sysroot/state", "device": "/dev/vda4"}
    ],
    "next_commands": [
      "recstrap /mnt/sysroot",
      "recfstab /mnt/sysroot >> /mnt/sysroot/etc/fstab",
      "recchroot /mnt/sysroot",
      "recab status"
    ],
    "mode_context": {
      "install_target_slot": "A",
      "inactive_slot_hint": "B",
      "slot_a_device": "/dev/vda2",
      "slot_b_device": "/dev/vda3",
      "notes": [
        "A/B mode defaults install target to slot A for first install run.",
        "Use recab to manage active/inactive slot transitions after installation."
      ]
    }
  },
  "warnings": []
}
